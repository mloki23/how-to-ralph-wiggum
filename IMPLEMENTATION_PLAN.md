<!-- Generated by LLM with content and structure it deems most appropriate -->

# Implementation Plan — Simple Trading Signal Generator

**Spec**: `specs/test-project.md`
**Status**: Complete — all priorities implemented, 31 tests passing

## Priority 1: Project Setup — DONE

- [x] `.gitignore` updated with Python artifacts and `output.json`
- [x] `src/lib/__init__.py` created
- [x] `src/tests/__init__.py` created
- [x] `src/data/sample.csv` — 40 rows with uptrend, downtrend, and stable segments

## Priority 2: Core Implementation — DONE

- [x] **CSV Reader** (`src/lib/csv_reader.py`) — reads OHLCV CSV, validates columns, converts to float
- [x] **RSI Calculator** (`src/lib/rsi.py`) — Wilder's 14-period smoothing with edge cases (all-gains→100, all-losses→0, flat→100)
- [x] **Signal Generator** (`src/lib/signals.py`) — BUY < 30, SELL > 70, HOLD otherwise (strict inequalities)
- [x] **JSON Writer** (`src/lib/json_writer.py`) — indent=2, None→null
- [x] **Main Script** (`src/main.py`) — argparse CLI, pipeline orchestration, summary output, exit code 1 on errors

## Priority 3: Tests — DONE (31 tests)

- [x] `test_csv_reader.py` — 7 tests (valid read, missing file, wrong columns, empty file, header-only, float conversion, sample data)
- [x] `test_rsi.py` — 8 tests (None for first 14, fewer than 15 points, all-gains=100, all-losses=0, flat=100, output length, range check, hand-calculated known values)
- [x] `test_signals.py` — 10 tests (BUY/SELL/HOLD ranges, boundary 30.0=HOLD, boundary 70.0=HOLD, None→None, list generation, extremes)
- [x] `test_json_writer.py` — 4 tests (valid JSON, structure, null values, indent formatting)
- [x] `test_integration.py` — 2 tests (full pipeline with signal verification, missing file error)

## Priority 4: Documentation & Polish — DONE

- [x] `AGENTS.md` updated with build/run/test commands
- [x] All acceptance criteria verified:
  - [x] Script runs without errors on sample data (40 rows → 6 BUY, 4 SELL, 16 HOLD, 14 pending)
  - [x] RSI matches Wilder's smoothing (verified against hand-calculation)
  - [x] Signals correctly use strict inequalities
  - [x] `output.json` is valid JSON with correct structure

## Design Decisions

- **No external dependencies**: Python standard library only (`csv`, `json`, `sys`, `argparse`)
- **Modular structure in `src/lib/`**: Separate modules for each concern
- **Wilder's smoothing**: Exponential weighting with factor 1/14, distinct from SMA
- **Testing with `unittest`**: Run via `python -m unittest discover -s src/tests -v`
- **Flat prices edge case**: RSI = 100 by convention (0/0 → treated as no losses)

## Learnings

- pytest not installed in this environment; use `python -m unittest discover` instead
- Hand-calculated RSI for classic test series [44, 44.34, ...] at index 14 = 72.98 (not 70.46 as some references suggest — those may use different smoothing)
